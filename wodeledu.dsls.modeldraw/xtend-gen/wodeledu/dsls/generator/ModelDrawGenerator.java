/**
 * generated by Xtext 2.13.0
 */
package wodeledu.dsls.generator;

import com.google.common.base.Objects;
import com.google.common.collect.Iterables;
import manager.JavaUtils;
import manager.ModelManager;
import manager.ProjectUtils;
import modeldraw.BooleanAttribute;
import modeldraw.Content;
import modeldraw.Decoration;
import modeldraw.Edge;
import modeldraw.Enumerator;
import modeldraw.Information;
import modeldraw.Level;
import modeldraw.MutatorDraw;
import modeldraw.Node;
import modeldraw.NodeColor;
import modeldraw.NodeEnumerator;
import modeldraw.NodeShape;
import modeldraw.NodeStyle;
import modeldraw.NodeType;
import modeldraw.Relation;
import org.eclipse.core.resources.IProject;
import org.eclipse.emf.common.util.EList;
import org.eclipse.emf.ecore.EAttribute;
import org.eclipse.emf.ecore.EObject;
import org.eclipse.emf.ecore.EReference;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.xtend2.lib.StringConcatenation;
import org.eclipse.xtext.generator.AbstractGenerator;
import org.eclipse.xtext.generator.IFileSystemAccess2;
import org.eclipse.xtext.generator.IGeneratorContext;
import org.eclipse.xtext.xbase.lib.IteratorExtensions;

/**
 * @author Pablo Gomez-Abajo - modelDraw code generator.
 * 
 * Generates the Java code for the graphical
 * representation of the models.
 */
@SuppressWarnings("all")
public class ModelDrawGenerator extends AbstractGenerator {
  protected IProject project = null;
  
  private String fileName;
  
  private String className;
  
  @Override
  public void doGenerate(final Resource resource, final IFileSystemAccess2 fsa, final IGeneratorContext context) {
    ProjectUtils.resetProject();
    this.project = ProjectUtils.getProject();
    int i = 0;
    this.fileName = resource.getURI().lastSegment();
    String _replaceAll = this.fileName.replaceAll(".draw", "").replaceAll("[.]", "_");
    String _plus = (_replaceAll + ".draw");
    this.fileName = _plus;
    Iterable<MutatorDraw> _filter = Iterables.<MutatorDraw>filter(IteratorExtensions.<EObject>toIterable(resource.getAllContents()), MutatorDraw.class);
    for (final MutatorDraw e : _filter) {
      {
        if ((i == 0)) {
          String _replace = this.fileName.replace(".draw", "");
          String _plus_1 = (_replace + "Draw.java");
          this.fileName = _plus_1;
        } else {
          String _replace_1 = this.fileName.replace(".draw", "");
          String _plus_2 = (_replace_1 + Integer.valueOf(i));
          String _plus_3 = (_plus_2 + "Draw.java");
          this.fileName = _plus_3;
        }
        this.className = this.fileName.replaceAll("Draw.java", "");
        fsa.generateFile(((("mutator/" + this.className) + "/") + this.fileName), JavaUtils.format(this.compile(e), false));
        i++;
      }
    }
  }
  
  public CharSequence generate(final MutatorDraw draw, final String folder) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("HashMap<EObject, LabelStyle> dotnodes = new HashMap<EObject, LabelStyle>();");
    _builder.newLine();
    _builder.append("HashMap<String, ArrayList<HashMap<String, String>>> dotrels = new HashMap<String, ArrayList<HashMap<String, String>>>();");
    _builder.newLine();
    _builder.append("HashMap<String, ArrayList<String>> dottext = new HashMap<String, ArrayList<String>>();");
    _builder.newLine();
    _builder.append("ArrayList<String> dotcode = new ArrayList<String>();");
    _builder.newLine();
    {
      EList<Node> _nodes = draw.getNodes();
      boolean _tripleNotEquals = (_nodes != null);
      if (_tripleNotEquals) {
        {
          int _size = draw.getNodes().size();
          boolean _greaterThan = (_size > 0);
          if (_greaterThan) {
            _builder.append("generateNodes(packages, model, dotnodes, dotrels);");
            _builder.newLine();
          }
        }
      }
    }
    {
      EList<Relation> _relations = draw.getRelations();
      boolean _tripleNotEquals_1 = (_relations != null);
      if (_tripleNotEquals_1) {
        {
          int _size_1 = draw.getRelations().size();
          boolean _greaterThan_1 = (_size_1 > 0);
          if (_greaterThan_1) {
            _builder.append("generateRelations(model, dotrels, dottext);");
            _builder.newLine();
          }
        }
      }
    }
    _builder.append("dotcode.add(\"digraph ");
    String _name = draw.getName().getName();
    _builder.append(_name);
    _builder.append(" {\\n\\nrankdir=LR;\\n\");");
    _builder.newLineIfNotEmpty();
    _builder.append("for (EObject dotnode : dotnodes.keySet()) {");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("if (dotnodes.get(dotnode) != null) {");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("dotcode.add(dotnodes.get(dotnode).name.replaceAll(\"\'\", \"\") + \" [\" + dotnodes.get(dotnode).label.replaceAll(\"\'\", \"\") + \"];\\n\");");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.append("for (String dott : dottext.keySet()) {");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("if (dotrels.get(dott) == null) {");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("dotcode.add(dott + \";\\n\");");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("else {");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if (dotrels.get(dott).size() == 0) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("dotcode.add(dott + \";\\n\");");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("else {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for (String text : dottext.get(dott)) {");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("dotcode.add(dott.replaceAll(\"\'\", \"\") + \" [\" + text.replaceAll(\"\'\", \"\") + \"];\\n\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.append("dotcode.add(\"}\");");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence compile(final Content content, final String hmname) {
    StringConcatenation _builder = new StringConcatenation();
    {
      if ((content != null)) {
        {
          if (((content.getNodenum() != null) && (content.getNodenum().size() > 0))) {
            {
              EList<NodeEnumerator> _nodenum = content.getNodenum();
              for(final NodeEnumerator nodenum : _nodenum) {
                _builder.append("for (EAttribute attribute : obj.eClass().getEAllAttributes()) {");
                _builder.newLine();
                {
                  EAttribute _att = nodenum.getAtt();
                  boolean _tripleNotEquals = (_att != null);
                  if (_tripleNotEquals) {
                    _builder.append("\t");
                    _builder.append("if (attribute.getName().equals(\"");
                    String _name = nodenum.getAtt().getName();
                    _builder.append(_name, "\t");
                    _builder.append("\")) {");
                    _builder.newLineIfNotEmpty();
                  } else {
                    _builder.append("\t");
                    _builder.append("if (attribute.getName().equals(\"name\")) {");
                    _builder.newLine();
                  }
                }
                _builder.append("\t\t");
                _builder.append("if (obj.eGet(attribute) != null) {");
                _builder.newLine();
                _builder.append("\t\t\t");
                _builder.append("EObject o = (EObject) obj.eGet(attribute);");
                _builder.newLine();
                _builder.append("\t\t\t");
                _builder.append("if (o instanceof EEnumLiteral) {");
                _builder.newLine();
                _builder.append("\t\t\t\t");
                _builder.append("EEnumLiteral lit = (EEnumLiteral) o;");
                _builder.newLine();
                {
                  if (((nodenum.getEnumerator() != null) && (nodenum.getEnumerator().size() > 0))) {
                    {
                      EList<Enumerator> _enumerator = nodenum.getEnumerator();
                      for(final Enumerator lit : _enumerator) {
                        _builder.append("\t\t\t\t");
                        _builder.append("if (lit.getLiteral().equals(\"");
                        String _name_1 = lit.getLiteral().getName();
                        _builder.append(_name_1, "\t\t\t\t");
                        _builder.append("\")) {");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t\t\t\t");
                        _builder.append("\t");
                        _builder.append("text = ");
                        _builder.append(hmname, "\t\t\t\t\t");
                        _builder.append(".get(obj);");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t\t\t\t");
                        _builder.append("\t");
                        _builder.append("text = text + \"");
                        String _value = lit.getValue();
                        _builder.append(_value, "\t\t\t\t\t");
                        _builder.append(" \";");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t\t\t\t");
                        _builder.append("\t");
                        _builder.append(hmname, "\t\t\t\t\t");
                        _builder.append(".put(obj, text);");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t\t\t\t");
                        _builder.append("break;");
                        _builder.newLine();
                        _builder.append("\t\t\t\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                      }
                    }
                  }
                }
                _builder.append("\t\t\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t\t");
                _builder.append("break;");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("}");
                _builder.newLine();
              }
            }
          }
        }
        {
          if (((content.getInfo() != null) && (content.getInfo().size() > 0))) {
            {
              EList<Information> _info = content.getInfo();
              for(final Information info : _info) {
                _builder.append("for (EReference r : obj.eClass().getEAllReferences()) {");
                _builder.newLine();
                {
                  EReference _type = info.getType();
                  boolean _tripleNotEquals_1 = (_type != null);
                  if (_tripleNotEquals_1) {
                    _builder.append("\t");
                    _builder.append("if (r.getName().equals(\"");
                    String _name_2 = info.getType().getName();
                    _builder.append(_name_2, "\t");
                    _builder.append("\")) {");
                    _builder.newLineIfNotEmpty();
                  } else {
                    _builder.append("\t");
                    _builder.append("if (r.getName().equals(\"name\")) {");
                    _builder.newLine();
                  }
                }
                _builder.append("\t\t");
                _builder.append("if (obj.eGet(r) != null) {");
                _builder.newLine();
                _builder.append("\t\t\t");
                _builder.append("EObject o = (EObject) obj.eGet(r);");
                _builder.newLine();
                _builder.append("\t\t\t");
                _builder.append("for (EAttribute attribute : o.eClass().getEAllAttributes()) {");
                _builder.newLine();
                {
                  EAttribute _att_1 = info.getAtt();
                  boolean _tripleNotEquals_2 = (_att_1 != null);
                  if (_tripleNotEquals_2) {
                    _builder.append("\t\t\t\t");
                    _builder.append("if (attribute.getName().equals(\"");
                    String _name_3 = info.getAtt().getName();
                    _builder.append(_name_3, "\t\t\t\t");
                    _builder.append("\")) {");
                    _builder.newLineIfNotEmpty();
                  } else {
                    _builder.append("\t\t\t\t");
                    _builder.append("if (attribute.getName().equals(\"name\")) {");
                    _builder.newLine();
                  }
                }
                _builder.append("\t\t\t\t\t");
                _builder.append("text = ");
                _builder.append(hmname, "\t\t\t\t\t");
                _builder.append(".get(obj);");
                _builder.newLineIfNotEmpty();
                _builder.append("\t\t\t\t\t");
                _builder.append("text = text + (String) o.eGet(attribute) + \" \";");
                _builder.newLine();
                _builder.append("\t\t\t\t\t");
                _builder.append(hmname, "\t\t\t\t\t");
                _builder.append(".put(obj, text);");
                _builder.newLineIfNotEmpty();
                _builder.append("\t\t\t\t\t");
                _builder.append("break;");
                _builder.newLine();
                _builder.append("\t\t\t\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t\t\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t\t");
                _builder.append("break;");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("}");
                _builder.newLine();
              }
            }
          }
        }
        _builder.append("for (EAttribute attribute : obj.eClass().getEAllAttributes()) {");
        _builder.newLine();
        {
          EAttribute _attName = content.getAttName();
          boolean _tripleNotEquals_3 = (_attName != null);
          if (_tripleNotEquals_3) {
            _builder.append("\t");
            _builder.append("if (attribute.getName().equals(\"");
            String _name_4 = content.getAttName().getName();
            _builder.append(_name_4, "\t");
            _builder.append("\")) {");
            _builder.newLineIfNotEmpty();
          } else {
            _builder.append("\t");
            _builder.append("if (attribute.getName().equals(\"name\")) {");
            _builder.newLine();
          }
        }
        _builder.append("\t\t");
        _builder.append("text = ");
        _builder.append(hmname, "\t\t");
        _builder.append(".get(obj);");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        _builder.append("text = text + (String) obj.eGet(attribute) + \" \";");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append(hmname, "\t\t");
        _builder.append(".put(obj, text);");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        _builder.append("break;");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("}");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        {
          String _symbol = content.getSymbol();
          boolean _tripleNotEquals_4 = (_symbol != null);
          if (_tripleNotEquals_4) {
            _builder.append("text = ");
            _builder.append(hmname);
            _builder.append(".get(obj);");
            _builder.newLineIfNotEmpty();
            _builder.append("text = text + \"");
            String _symbol_1 = content.getSymbol();
            _builder.append(_symbol_1);
            _builder.append("\";");
            _builder.newLineIfNotEmpty();
            _builder.append(hmname);
            _builder.append(".put(obj, text);");
            _builder.newLineIfNotEmpty();
          }
        }
      }
    }
    return _builder;
  }
  
  public CharSequence decorate(final Relation rel) {
    StringConcatenation _builder = new StringConcatenation();
    {
      if (((rel.getLabel() != null) && (rel.getLabel().size() > 0))) {
        _builder.append("parameters.put(\"label\", label);");
        _builder.newLine();
      }
    }
    {
      Decoration _tar_decoration = rel.getTar_decoration();
      boolean _notEquals = (!Objects.equal(_tar_decoration, Decoration.NONE));
      if (_notEquals) {
        _builder.append("if (parameters.containsKey(\"dir\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"dir\", \"both\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("if (parameters.containsKey(\"arrowtail\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"arrowtail\", \"none\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        {
          Decoration _tar_decoration_1 = rel.getTar_decoration();
          boolean _equals = Objects.equal(_tar_decoration_1, Decoration.TRIANGLE);
          if (_equals) {
            _builder.append("parameters.put(\"arrowhead\", \"empty\");");
            _builder.newLine();
          } else {
            {
              Decoration _tar_decoration_2 = rel.getTar_decoration();
              boolean _notEquals_1 = (!Objects.equal(_tar_decoration_2, Decoration.EMPTY));
              if (_notEquals_1) {
                _builder.append("parameters.put(\"arrowhead\", \"");
                Decoration _tar_decoration_3 = rel.getTar_decoration();
                _builder.append(_tar_decoration_3);
                _builder.append("\");");
                _builder.newLineIfNotEmpty();
              } else {
                _builder.append("parameters.put(\"arrowhead\", \"none\");");
                _builder.newLine();
              }
            }
          }
        }
      }
    }
    {
      EAttribute _tar_label = rel.getTar_label();
      boolean _tripleNotEquals = (_tar_label != null);
      if (_tripleNotEquals) {
        _builder.append("if (parameters.containsKey(\"dir\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"dir\", \"both\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("if (parameters.containsKey(\"arrowhead\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"arrowhead\", \"none\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("if (parameters.containsKey(\"arrowtail\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"arrowtail\", \"none\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("parameters.put(\"headlabel\", tar_label != null ? tar_label : \"\");");
        _builder.newLine();
      }
    }
    {
      Decoration _src_decoration = rel.getSrc_decoration();
      boolean _notEquals_2 = (!Objects.equal(_src_decoration, Decoration.NONE));
      if (_notEquals_2) {
        _builder.append("if (parameters.containsKey(\"dir\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"dir\", \"both\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("if (parameters.containsKey(\"arrowhead\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"arrowhead\", \"none\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        {
          Decoration _src_decoration_1 = rel.getSrc_decoration();
          boolean _equals_1 = Objects.equal(_src_decoration_1, Decoration.TRIANGLE);
          if (_equals_1) {
            _builder.append("parameters.put(\"arrowtail\", \"empty\");");
            _builder.newLine();
          } else {
            {
              Decoration _src_decoration_2 = rel.getSrc_decoration();
              boolean _notEquals_3 = (!Objects.equal(_src_decoration_2, Decoration.EMPTY));
              if (_notEquals_3) {
                _builder.append("parameters.put(\"arrowtail\", \"");
                Decoration _src_decoration_3 = rel.getSrc_decoration();
                _builder.append(_src_decoration_3);
                _builder.append("\");");
                _builder.newLineIfNotEmpty();
              } else {
                _builder.append("parameters.put(\"arrowtail\", \"none\");");
                _builder.newLine();
              }
            }
          }
        }
      }
    }
    {
      EAttribute _src_label = rel.getSrc_label();
      boolean _tripleNotEquals_1 = (_src_label != null);
      if (_tripleNotEquals_1) {
        _builder.append("if (parameters.containsKey(\"dir\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"dir\", \"both\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("if (parameters.containsKey(\"arrowhead\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"arrowhead\", \"none\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("if (parameters.containsKey(\"arrowtail\") == false) {");
        _builder.newLine();
        _builder.append("\t");
        _builder.append("parameters.put(\"arrowtail\", \"none\");");
        _builder.newLine();
        _builder.append("}");
        _builder.newLine();
        _builder.append("parameters.put(\"taillabel\", src_label != null ? src_label : \"\");");
        _builder.newLine();
      }
    }
    return _builder;
  }
  
  public CharSequence compile(final MutatorDraw draw) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("package mutator.");
    String _name = this.project.getName();
    _builder.append(_name);
    _builder.append(";");
    _builder.newLineIfNotEmpty();
    _builder.newLine();
    _builder.append("import java.io.File;");
    _builder.newLine();
    _builder.append("import java.io.FileNotFoundException;");
    _builder.newLine();
    _builder.append("import java.io.PrintWriter;");
    _builder.newLine();
    _builder.append("import java.io.IOException;");
    _builder.newLine();
    _builder.append("import java.io.UnsupportedEncodingException;");
    _builder.newLine();
    _builder.append("import java.lang.InterruptedException;");
    _builder.newLine();
    _builder.append("import java.util.Arrays;");
    _builder.newLine();
    _builder.append("import java.util.ArrayList;");
    _builder.newLine();
    _builder.append("import java.util.HashMap;");
    _builder.newLine();
    _builder.append("import java.util.LinkedHashMap;");
    _builder.newLine();
    _builder.append("import java.util.List;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EAttribute;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EClass;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EEnum;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EEnumLiteral;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EObject;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EPackage;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.EReference;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.resource.Resource;");
    _builder.newLine();
    _builder.append("import org.eclipse.emf.ecore.util.EcoreUtil;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("import exceptions.MetaModelNotFoundException;");
    _builder.newLine();
    _builder.append("import exceptions.ModelNotFoundException;");
    _builder.newLine();
    _builder.append("import manager.ModelManager;");
    _builder.newLine();
    _builder.append("import manager.DrawUtils.LabelStyle;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class ");
    _builder.append(this.className);
    _builder.append("Draw implements manager.IMutatorDraw {");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("   \t\t");
    String _workspaceAbsolutePath = ModelManager.getWorkspaceAbsolutePath();
    String _plus = (_workspaceAbsolutePath + "/");
    String _name_1 = this.project.getName();
    String folder = (_plus + _name_1);
    _builder.newLineIfNotEmpty();
    _builder.newLine();
    {
      EList<Node> _nodes = draw.getNodes();
      boolean _tripleNotEquals = (_nodes != null);
      if (_tripleNotEquals) {
        {
          int _size = draw.getNodes().size();
          boolean _greaterThan = (_size > 0);
          if (_greaterThan) {
            _builder.append("\t");
            _builder.append("private static void generateNodes(List<EPackage> packages, Resource model, HashMap<EObject, LabelStyle> dotnodes, HashMap<String, ArrayList<HashMap<String, String>>> dotrels) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("// COUNTER: ");
            int counter = 0;
            _builder.newLineIfNotEmpty();
            {
              EList<Node> _nodes_1 = draw.getNodes();
              for(final Node node : _nodes_1) {
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("ArrayList<EObject> lnode_");
                _builder.append(counter, "\t\t");
                _builder.append(" = ModelManager.getObjectsOfType(\"");
                String _name_2 = node.getName().getName();
                _builder.append(_name_2, "\t\t");
                _builder.append("\", model);");
                _builder.newLineIfNotEmpty();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("for (EObject node : lnode_");
                _builder.append(counter, "\t\t");
                _builder.append(") {");
                _builder.newLineIfNotEmpty();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("LinkedHashMap<String, String> parameters = new LinkedHashMap<String, String>();");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("ArrayList<HashMap<String, String>> rels = new ArrayList<HashMap<String, String>>();");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("String name = \"\";");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("for (EAttribute att : node.eClass().getEAllAttributes()) {");
                _builder.newLine();
                {
                  EAttribute _attName = node.getAttName();
                  boolean _tripleNotEquals_1 = (_attName != null);
                  if (_tripleNotEquals_1) {
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("if (att.getName().equals(\"");
                    String _name_3 = node.getAttName().getName();
                    _builder.append(_name_3, "\t\t\t\t");
                    _builder.append("\")) {");
                    _builder.newLineIfNotEmpty();
                  } else {
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("if (att.getName().equals(\"name\")) {");
                    _builder.newLine();
                  }
                }
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t\t\t");
                _builder.append("name = (String) node.eGet(att);");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t\t\t");
                _builder.append("break;");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("}");
                _builder.newLine();
                {
                  EList<BooleanAttribute> _attribute = node.getAttribute();
                  boolean _tripleNotEquals_2 = (_attribute != null);
                  if (_tripleNotEquals_2) {
                    {
                      int _size_1 = node.getAttribute().size();
                      boolean _greaterThan_1 = (_size_1 > 0);
                      if (_greaterThan_1) {
                        {
                          EList<BooleanAttribute> _attribute_1 = node.getAttribute();
                          for(final BooleanAttribute att : _attribute_1) {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("for (EAttribute att : node.eClass().getEAllAttributes()) {");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("if (att.getName().equals(\"");
                            String _name_4 = att.getAtt().getName();
                            _builder.append(_name_4, "\t\t\t\t");
                            _builder.append("\")) {");
                            _builder.newLineIfNotEmpty();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("Object attObject = node.eGet(att);");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("if (attObject instanceof Boolean) {");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("Boolean value = (Boolean) attObject;");
                            _builder.newLine();
                            {
                              boolean _isNegation = att.isNegation();
                              boolean _equals = (_isNegation == true);
                              if (_equals) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("if (value == false) {");
                                _builder.newLine();
                              } else {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("if (value == true) {");
                                _builder.newLine();
                              }
                            }
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t\t");
                            _builder.append("LabelStyle style = null;");
                            _builder.newLine();
                            {
                              NodeType _type = node.getType();
                              boolean _equals_1 = Objects.equal(_type, NodeType.MARKEDNODE);
                              if (_equals_1) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("{");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = new LabelStyle();");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style.name = \"_nil\";");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style.shape = \"style = invis\"; ");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("dotnodes.put(EcoreUtil.create(node.eClass()), style);");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("if (dotnodes.containsKey(node) == false) {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = new LabelStyle();");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("else {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = dotnodes.get(node);");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.name = name;");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.border = \"0\";");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.shape = \"shape = ");
                                NodeShape _shape = node.getShape();
                                _builder.append(_shape, "\t\t\t\t\t");
                                _builder.append("\";");
                                _builder.newLineIfNotEmpty();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("dotnodes.put(node, style);");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("rels.add(parameters);");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("dotrels.put(\"_nil -> \" + name, rels);");
                                _builder.newLine();
                              }
                            }
                            {
                              NodeType _type_1 = node.getType();
                              boolean _equals_2 = Objects.equal(_type_1, NodeType.NODE);
                              if (_equals_2) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("if (dotnodes.containsKey(node) == false) {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = new LabelStyle();");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("else {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = dotnodes.get(node);");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.name = name;");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.border = \"0\";");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.shape = \"shape = ");
                                NodeShape _shape_1 = node.getShape();
                                _builder.append(_shape_1, "\t\t\t\t\t");
                                _builder.append("\";");
                                _builder.newLineIfNotEmpty();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("dotnodes.put(node, style);");
                                _builder.newLine();
                              }
                            }
                            {
                              NodeShape _shape_2 = node.getShape();
                              boolean _equals_3 = Objects.equal(_shape_2, NodeShape.RECORD);
                              if (_equals_3) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("if (dotnodes.containsKey(node) == false) {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = new LabelStyle();");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("else {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("\t");
                                _builder.append("style = dotnodes.get(node);");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("}");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.name = name;");
                                _builder.newLine();
                                {
                                  NodeStyle _style = node.getStyle();
                                  boolean _equals_4 = Objects.equal(_style, NodeStyle.ITALIC);
                                  if (_equals_4) {
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t\t");
                                    _builder.append("style.style = \"I\";");
                                    _builder.newLine();
                                  }
                                }
                                {
                                  NodeStyle _style_1 = node.getStyle();
                                  boolean _equals_5 = Objects.equal(_style_1, NodeStyle.UNDERLINE);
                                  if (_equals_5) {
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t\t");
                                    _builder.append("style.style = \"U\";");
                                    _builder.newLine();
                                  }
                                }
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.border = \"1\";");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("style.shape =\"shape = plaintext, style= filled, fillcolor=");
                                NodeColor _color = node.getColor();
                                _builder.append(_color, "\t\t\t\t\t");
                                _builder.append("\";");
                                _builder.newLineIfNotEmpty();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t\t");
                                _builder.append("dotnodes.put(node, style);");
                                _builder.newLine();
                              }
                            }
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("}");
                            _builder.newLine();
                            {
                              EList<EReference> _reference = node.getReference();
                              boolean _tripleNotEquals_3 = (_reference != null);
                              if (_tripleNotEquals_3) {
                                {
                                  int _size_2 = node.getReference().size();
                                  boolean _greaterThan_2 = (_size_2 > 0);
                                  if (_greaterThan_2) {
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t\t");
                                    _builder.append("HashMap<EObject, String> table = new HashMap<EObject, String>();");
                                    _builder.newLine();
                                    {
                                      EList<EReference> _reference_1 = node.getReference();
                                      for(final EReference ref : _reference_1) {
                                        {
                                          EList<Content> _contents = draw.getContents();
                                          boolean _tripleNotEquals_4 = (_contents != null);
                                          if (_tripleNotEquals_4) {
                                            {
                                              int _size_3 = draw.getContents().size();
                                              boolean _greaterThan_3 = (_size_3 > 0);
                                              if (_greaterThan_3) {
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("for (EReference ref : node.eClass().getEAllReferences()) {");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t");
                                                _builder.append("String label = \"\";");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t");
                                                _builder.append("List<EClass> classes = null;");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t");
                                                _builder.append("EClass cl = null;");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t");
                                                _builder.append("if (ref.getName().equals(\"");
                                                String _name_5 = ref.getName();
                                                _builder.append(_name_5, "\t\t\t\t\t\t");
                                                _builder.append("\")) {");
                                                _builder.newLineIfNotEmpty();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t");
                                                _builder.append("//COUNT SET:");
                                                int count = 0;
                                                _builder.newLineIfNotEmpty();
                                                {
                                                  EList<Content> _contents_1 = draw.getContents();
                                                  for(final Content content : _contents_1) {
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("//COUNT INC: ");
                                                    int _plusPlus = count++;
                                                    _builder.append(_plusPlus, "\t\t\t\t\t\t\t");
                                                    _builder.newLineIfNotEmpty();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("classes = new ArrayList<EClass>();");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("cl = ModelManager.getEClassByName(packages, \"");
                                                    String _name_6 = content.getName().getName();
                                                    _builder.append(_name_6, "\t\t\t\t\t\t\t");
                                                    _builder.append("\");");
                                                    _builder.newLineIfNotEmpty();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("classes.addAll(cl.getESuperTypes());");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("classes.add(cl);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("for (EClass c : classes) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t");
                                                    _builder.append("if (c.getName().equals(ref.getEType().getName())) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("String text = \"\";");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("if (ref.getUpperBound() < 0 || ref.getUpperBound() > 1) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t");
                                                    _builder.append("List<EObject> lobj = (List<EObject>) node.eGet(ref);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t");
                                                    _builder.append("if (lobj != null) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t");
                                                    _builder.append("for (EObject obj : lobj) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("if (obj != null) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("if (obj.eClass().getName().equals(\"");
                                                    String _name_7 = content.getName().getName();
                                                    _builder.append(_name_7, "\t\t\t\t\t\t\t\t\t\t\t\t\t");
                                                    _builder.append("\")) {");
                                                    _builder.newLineIfNotEmpty();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("if (table.containsKey(obj) == false) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t");
                                                    _builder.append("table.put(obj, \"\");");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    CharSequence _compile = this.compile(content, "table");
                                                    _builder.append(_compile, "\t\t\t\t\t\t\t\t\t\t\t\t\t\t");
                                                    _builder.newLineIfNotEmpty();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("if (label.length() > 0) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t");
                                                    _builder.append("if (label.endsWith(\"<TR>\") == true) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t\t");
                                                    _builder.append("label = label + \"<TD>\" + table.get(obj);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t");
                                                    _builder.append("else {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t\t");
                                                    _builder.append("label = label + \"<BR/>\" + table.get(obj);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("else {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t\t");
                                                    _builder.append("label = \"<TD>\" + table.get(obj);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("else {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t");
                                                    _builder.append("EObject obj = (EObject) node.eGet(ref);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t");
                                                    _builder.append("if (obj != null) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t");
                                                    _builder.append("if (obj.eClass().getName().equals(\"");
                                                    String _name_8 = content.getName().getName();
                                                    _builder.append(_name_8, "\t\t\t\t\t\t\t\t\t\t\t");
                                                    _builder.append("\")) {");
                                                    _builder.newLineIfNotEmpty();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("if (table.containsKey(obj) == false) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("table.put(obj, \"\");");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    CharSequence _compile_1 = this.compile(content, "table");
                                                    _builder.append(_compile_1, "\t\t\t\t\t\t\t\t\t\t\t\t");
                                                    _builder.newLineIfNotEmpty();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("if (label.length() > 0) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("if (label.endsWith(\"<TR>\") == true) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("label = label + \"<TD>\" + table.get(obj);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("else {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t\t");
                                                    _builder.append("label = label + \"<BR/>\" + table.get(obj);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("else {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t\t");
                                                    _builder.append("label = \"<TD>\" + table.get(obj);");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("if (label.length() > 0) {");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t");
                                                    _builder.append("label = label + \"</TD></TR><TR>\";");
                                                    _builder.newLine();
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("\t\t");
                                                    _builder.append("}");
                                                    _builder.newLine();
                                                  }
                                                }
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t");
                                                _builder.append("if (dotnodes.containsKey(node) == true) {");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t\t");
                                                _builder.append("if (dotnodes.get(node) != null) {");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t\t\t");
                                                _builder.append("LabelStyle style = dotnodes.get(node);");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t\t\t");
                                                _builder.append("style.label = style.label + label;");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t\t\t");
                                                _builder.append("dotnodes.put(node, style);");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t\t");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("}");
                                                _builder.newLine();
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("}");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("}");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("}");
                            _builder.newLine();
                          }
                        }
                      }
                    }
                  }
                }
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("}");
                _builder.newLine();
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("// INC COUNTER: ");
                _builder.append(counter = (counter + 1), "\t\t");
                _builder.newLineIfNotEmpty();
              }
            }
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("for (EObject dotnode : dotnodes.keySet()) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t");
            _builder.append("if (dotnodes.get(dotnode) != null) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("LabelStyle style = dotnodes.get(dotnode);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("if (style.style.length() == 0) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("if (style.label.length() == 0) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("style.label = style.shape + \", label=<<TABLE BORDER=\\\"0\\\" CELLBORDER=\\\"\" + style.border + \"\\\" CELLSPACING=\\\"0\\\"><TR><TD>\" + style.name + \"</TD></TR></TABLE>>\";");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("else {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("if (style.label.endsWith(\"<TR>\")) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("style.label = style.label.substring(0, style.label.length() - 4);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("if (style.label.endsWith(\"<TR></TD></TR>\")) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("style.label = style.label.substring(0, style.label.length() - 14);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("style.label = style.shape + \", label=<<TABLE BORDER=\\\"0\\\" CELLBORDER=\\\"\" + style.border + \"\\\" CELLSPACING=\\\"0\\\"><TR><TD>\" + style.name + \"</TD></TR><TR>\" + style.label + \"</TABLE>>\";");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("else {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("if (style.label.length() == 0) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("style.label = style.shape + \", label=<<TABLE BORDER=\\\"0\\\" CELLBORDER=\\\"\" + style.border + \"\\\" CELLSPACING=\\\"0\\\"><TR><TD><\" + style.style + \">\" + style.name + \"</\" + style.style + \"></TD></TR></TABLE>>\";");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("else {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("if (style.label.endsWith(\"<TR>\")) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("style.label = style.label.substring(0, style.label.length() - 4);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("if (style.label.endsWith(\"<TR></TD></TR>\")) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("style.label = style.label.substring(0, style.label.length() - 14);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("style.label = style.shape + \", label=<<TABLE BORDER=\\\"0\\\" CELLBORDER=\\\"\" + style.border + \"\\\" CELLSPACING=\\\"0\\\"><TR><TD><\" + style.style + \">\" + style.name + \"</\" + style.style + \"></TD></TR><TR>\" + style.label + \"</TABLE>>\";");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("dotnodes.put(dotnode, style);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("}");
            _builder.newLine();
          }
        }
      }
    }
    _builder.append("\t");
    _builder.newLine();
    {
      EList<Relation> _relations = draw.getRelations();
      boolean _tripleNotEquals_5 = (_relations != null);
      if (_tripleNotEquals_5) {
        {
          int _size_4 = draw.getRelations().size();
          boolean _greaterThan_4 = (_size_4 > 0);
          if (_greaterThan_4) {
            _builder.append("\t");
            _builder.append("private static void generateRelations(Resource model, HashMap<String, ArrayList<HashMap<String, String>>> dotrels, HashMap<String, ArrayList<String>> dottext) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("// COUNTER: ");
            int counter_1 = 0;
            _builder.newLineIfNotEmpty();
            {
              EList<Relation> _relations_1 = draw.getRelations();
              for(final Relation rel : _relations_1) {
                {
                  if ((rel instanceof Edge)) {
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("//");
                    Edge edge = ((Edge) rel);
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("ArrayList<EObject> ledge_");
                    _builder.append(counter_1, "\t\t");
                    _builder.append(" = ModelManager.getObjectsOfType(\"");
                    String _name_9 = edge.getName().getName();
                    _builder.append(_name_9, "\t\t");
                    _builder.append("\", model);");
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("for (EObject edge : ledge_");
                    _builder.append(counter_1, "\t\t");
                    _builder.append(") {");
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("LinkedHashMap<String, String> parameters = new LinkedHashMap<String, String>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("ArrayList<HashMap<String, String>> rels = new ArrayList<HashMap<String, String>>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("String source = \"\";");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("String target = \"\";");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("String label = \"\";");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("String src_label = \"\";");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("String tar_label = \"\";");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("for (EReference ref : edge.eClass().getEAllReferences()) {");
                    _builder.newLine();
                    {
                      EReference _source = edge.getSource();
                      boolean _tripleNotEquals_6 = (_source != null);
                      if (_tripleNotEquals_6) {
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("if (ref.getName().equals(\"");
                        String _name_10 = edge.getSource().getName();
                        _builder.append(_name_10, "\t\t\t\t");
                        _builder.append("\")) {");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("EObject src = (EObject) edge.eGet(ref);");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("if (src != null) {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("for (EAttribute att : src.eClass().getEAllAttributes()) {");
                        _builder.newLine();
                        {
                          EAttribute _attName_1 = edge.getAttName();
                          boolean _tripleNotEquals_7 = (_attName_1 != null);
                          if (_tripleNotEquals_7) {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("\t\t");
                            _builder.append("if (att.getName().equals(\"");
                            String _name_11 = edge.getAttName().getName();
                            _builder.append(_name_11, "\t\t\t\t\t\t");
                            _builder.append("\")) {");
                            _builder.newLineIfNotEmpty();
                          } else {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("\t\t");
                            _builder.append("if (att.getName().equals(\"name\")) {");
                            _builder.newLine();
                          }
                        }
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t");
                        _builder.append("source = (String) src.eGet(att);");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t");
                        _builder.append("break;");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("}");
                        _builder.newLine();
                      }
                    }
                    {
                      EReference _target = edge.getTarget();
                      boolean _tripleNotEquals_8 = (_target != null);
                      if (_tripleNotEquals_8) {
                        _builder.append("\t");
                        _builder.append("if (ref.getName().equals(\"");
                        String _name_12 = edge.getTarget().getName();
                        _builder.append(_name_12, "\t");
                        _builder.append("\")) {");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t\t");
                        _builder.append("EObject tar = (EObject) edge.eGet(ref);");
                        _builder.newLine();
                        _builder.append("\t\t");
                        _builder.append("if (tar != null) {");
                        _builder.newLine();
                        _builder.append("\t\t\t");
                        _builder.append("for (EAttribute att : tar.eClass().getEAllAttributes()) {");
                        _builder.newLine();
                        {
                          EAttribute _attName_2 = edge.getAttName();
                          boolean _tripleNotEquals_9 = (_attName_2 != null);
                          if (_tripleNotEquals_9) {
                            _builder.append("\t\t\t\t");
                            _builder.append("if (att.getName().equals(\"");
                            String _name_13 = edge.getAttName().getName();
                            _builder.append(_name_13, "\t\t\t\t");
                            _builder.append("\")) {");
                            _builder.newLineIfNotEmpty();
                          } else {
                            _builder.append("\t\t\t\t");
                            _builder.append("if (att.getName().equals(\"name\")) {");
                            _builder.newLine();
                          }
                        }
                        _builder.append("\t\t\t\t\t");
                        _builder.append("target = (String) tar.eGet(att);");
                        _builder.newLine();
                        _builder.append("\t\t\t\t\t");
                        _builder.append("break;");
                        _builder.newLine();
                        _builder.append("\t\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("}");
                        _builder.newLine();
                      }
                    }
                    {
                      EList<EReference> _reference_2 = edge.getReference();
                      boolean _tripleNotEquals_10 = (_reference_2 != null);
                      if (_tripleNotEquals_10) {
                        {
                          if ((((edge.getLabel() != null) || (edge.getSrc_label() != null)) || (edge.getTar_label() != null))) {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("label += \"\\\"\";");
                            _builder.newLine();
                            {
                              int _size_5 = edge.getReference().size();
                              boolean _greaterThan_5 = (_size_5 > 0);
                              if (_greaterThan_5) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("for (EReference ref : edge.eClass().getEAllReferences()) {");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                int i = 0;
                                _builder.newLineIfNotEmpty();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                int j = 0;
                                _builder.newLineIfNotEmpty();
                                {
                                  EList<EReference> _reference_3 = edge.getReference();
                                  for(final EReference reference : _reference_3) {
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("if (ref.getName().equals(\"");
                                    String _name_14 = reference.getName();
                                    _builder.append(_name_14, "\t\t\t\t");
                                    _builder.append("\")) {");
                                    _builder.newLineIfNotEmpty();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("EObject obj = (EObject) edge.eGet(ref);");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("if (obj != null) {");
                                    _builder.newLine();
                                    {
                                      if (((edge.getLabel() != null) && (edge.getLabel().size() > i))) {
                                        _builder.append("\t");
                                        _builder.append("\t");
                                        _builder.append("\t");
                                        _builder.append("\t");
                                        _builder.append("\t\t");
                                        boolean found = false;
                                        _builder.newLineIfNotEmpty();
                                        {
                                          EList<EAttribute> _eAllAttributes = reference.getEReferenceType().getEAllAttributes();
                                          for(final EAttribute att_1 : _eAllAttributes) {
                                            {
                                              boolean _equals_6 = att_1.getName().equals(edge.getLabel().get(i).getName());
                                              if (_equals_6) {
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("for (EAttribute att : obj.eClass().getEAllAttributes()) {");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("    ");
                                                _builder.append("if (att.getName().equals(\"");
                                                String _name_15 = edge.getLabel().get(i).getName();
                                                _builder.append(_name_15, "\t\t\t\t\t\t    ");
                                                _builder.append("\")) {");
                                                _builder.newLineIfNotEmpty();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t    ");
                                                _builder.append("if (att.getEType().getName().equals(\"EString\")) {");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t    ");
                                                _builder.append("label += (String) obj.eGet(att) + \", \";");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t    ");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t    ");
                                                _builder.append("if (att.getEType() instanceof EEnum) {");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t    ");
                                                _builder.append("EEnumLiteral value = (EEnumLiteral) obj.eGet(att);");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t\t    ");
                                                _builder.append("label += value.getName() + \", \";");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t    ");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("    ");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("}");
                                                _builder.newLine();
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("//");
                                                _builder.append(found = true, "\t\t\t\t\t\t");
                                                _builder.newLineIfNotEmpty();
                                                _builder.append("                            ");
                                                _builder.append("//");
                                                int _plusPlus_1 = i++;
                                                _builder.append(_plusPlus_1, "                            ");
                                                _builder.newLineIfNotEmpty();
                                              }
                                            }
                                          }
                                        }
                                        {
                                          if ((found == false)) {
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("for (EReference refType : obj.eClass().getEAllReferences()) {");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t");
                                            _builder.append("//");
                                            String refTypeName = Decoration.NONE.getLiteral();
                                            _builder.newLineIfNotEmpty();
                                            {
                                              int _size_6 = edge.getRefType().size();
                                              boolean _greaterThan_6 = (_size_6 > j);
                                              if (_greaterThan_6) {
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t");
                                                _builder.append("\t\t");
                                                _builder.append("\t");
                                                _builder.append("//");
                                                _builder.append(refTypeName = edge.getRefType().get(j).getName(), "\t\t\t\t\t\t\t");
                                                _builder.newLineIfNotEmpty();
                                              }
                                            }
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("    ");
                                            _builder.append("if (refType.getName().equals(\"");
                                            _builder.append(refTypeName, "\t\t\t\t\t\t    ");
                                            _builder.append("\")) {");
                                            _builder.newLineIfNotEmpty();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("    \t");
                                            _builder.append("EObject o = (EObject) ((EObject) edge.eGet(ref)).eGet(refType);");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("    \t");
                                            _builder.append("if (o != null) {");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("    \t    ");
                                            _builder.append("for (EAttribute att : o.eClass().getEAllAttributes()) {");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("    \t\t    ");
                                            _builder.append("if (att.getName().equals(\"");
                                            String _name_16 = edge.getLabel().get(i).getName();
                                            _builder.append(_name_16, "\t\t\t\t\t\t    \t\t    ");
                                            _builder.append("\")) {");
                                            _builder.newLineIfNotEmpty();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t    \t        ");
                                            _builder.append("if (att.getEType().getName().equals(\"EString\")) {");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t\t    \t        ");
                                            _builder.append("label += (String) o.eGet(att) + \", \";");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t    \t        ");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t    \t        ");
                                            _builder.append("if (att.getEType() instanceof EEnum) {");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t\t    \t        ");
                                            _builder.append("EEnumLiteral value = (EEnumLiteral) o.eGet(att);");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t\t    \t        ");
                                            _builder.append("label += value.getName() + \", \";");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t\t    \t    ");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t    \t    ");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t        ");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("\t    ");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("    ");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t");
                                            _builder.append("\t\t");
                                            _builder.append("}");
                                            _builder.newLine();
                                            _builder.append("\t\t\t\t\t\t    ");
                                            _builder.append("//");
                                            int _plusPlus_2 = i++;
                                            _builder.append(_plusPlus_2, "\t\t\t\t\t\t    ");
                                            _builder.newLineIfNotEmpty();
                                            _builder.append("\t\t\t\t\t\t    ");
                                            _builder.append("//");
                                            int _plusPlus_3 = j++;
                                            _builder.append(_plusPlus_3, "\t\t\t\t\t\t    ");
                                            _builder.newLineIfNotEmpty();
                                          }
                                        }
                                      }
                                    }
                                    {
                                      EAttribute _src_label = edge.getSrc_label();
                                      boolean _tripleNotEquals_11 = (_src_label != null);
                                      if (_tripleNotEquals_11) {
                                        _builder.append("if (att.getName().equals(\"");
                                        String _name_17 = edge.getSrc_label().getName();
                                        _builder.append(_name_17);
                                        _builder.append("\")) {");
                                        _builder.newLineIfNotEmpty();
                                        _builder.append("\t\t\t\t\t\t\t    ");
                                        _builder.append("src_label = \"\\\"\" + (String) obj.eGet(att) + \"\\\"\";");
                                        _builder.newLine();
                                        _builder.append("}");
                                        _builder.newLine();
                                      }
                                    }
                                    {
                                      EAttribute _tar_label = edge.getTar_label();
                                      boolean _tripleNotEquals_12 = (_tar_label != null);
                                      if (_tripleNotEquals_12) {
                                        _builder.append("if (att.getName().equals(\"");
                                        String _name_18 = edge.getTar_label().getName();
                                        _builder.append(_name_18);
                                        _builder.append("\")) {");
                                        _builder.newLineIfNotEmpty();
                                        _builder.append("    ");
                                        _builder.append("tar_label = \"\\\"\" + (String) obj.eGet(att) + \"\\\"\";");
                                        _builder.newLine();
                                        _builder.append("}");
                                        _builder.newLine();
                                      }
                                    }
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("}");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("}");
                                    _builder.newLine();
                                  }
                                }
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("}");
                                _builder.newLine();
                              }
                            }
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("if (label.indexOf(\",\") > 0) {");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("label = label.substring(0, label.lastIndexOf(\",\"));");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("}");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("label += \"\\\"\";");
                            _builder.newLine();
                          }
                        }
                      } else {
                        {
                          if ((((edge.getLabel() != null) || (edge.getSrc_label() != null)) || (edge.getTar_label() != null))) {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("label = \"\\\"\";");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("for (EAttribute att : edge.eClass().getEAllAttributes()) {");
                            _builder.newLine();
                            {
                              if (((edge.getLabel() != null) && (edge.getLabel().size() > 0))) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                int i_1 = 0;
                                _builder.newLineIfNotEmpty();
                                {
                                  EList<EAttribute> _label = edge.getLabel();
                                  for(final EAttribute label : _label) {
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("if (att.getName().equals(\"");
                                    String _name_19 = label.getName();
                                    _builder.append(_name_19, "\t\t\t");
                                    _builder.append("\")) {");
                                    _builder.newLineIfNotEmpty();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("if (att.getEType().getName().equals(\"EString\")) {");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t\t");
                                    _builder.append("label += (String) edge.eGet(att) + \", \";");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("}");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("if (att.getEType() instanceof EEnum) {");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t\t");
                                    _builder.append("EEnumLiteral value = (EEnumLiteral) obj.eGet(att);");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t\t");
                                    _builder.append("label += value.getName() + \", \";");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("}");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("}");
                                    _builder.newLine();
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("\t");
                                    _builder.append("//");
                                    int _plusPlus_4 = i_1++;
                                    _builder.append(_plusPlus_4, "\t\t\t");
                                    _builder.newLineIfNotEmpty();
                                  }
                                }
                              }
                            }
                            {
                              EAttribute _src_label_1 = edge.getSrc_label();
                              boolean _tripleNotEquals_13 = (_src_label_1 != null);
                              if (_tripleNotEquals_13) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("if (att.getName().equals(\"");
                                String _name_20 = edge.getSrc_label().getName();
                                _builder.append(_name_20, "\t\t\t");
                                _builder.append("\")) {");
                                _builder.newLineIfNotEmpty();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("src_label = \"\\\"\" + (String) edge.eGet(att) + \"\\\"\";");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("}");
                                _builder.newLine();
                              }
                            }
                            {
                              EAttribute _tar_label_1 = edge.getTar_label();
                              boolean _tripleNotEquals_14 = (_tar_label_1 != null);
                              if (_tripleNotEquals_14) {
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("if (att.getName().equals(\"");
                                String _name_21 = edge.getTar_label().getName();
                                _builder.append(_name_21, "\t\t\t");
                                _builder.append("\")) {");
                                _builder.newLineIfNotEmpty();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("tar_label = \"\\\"\" + (String) edge.eGet(att) + \"\\\"\";");
                                _builder.newLine();
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("\t");
                                _builder.append("}");
                                _builder.newLine();
                              }
                            }
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("}");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("if (label.indexOf(\",\") > 0) {");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("label = label.substring(0, label.lastIndexOf(\",\"));");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("}");
                            _builder.newLine();
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("label += \"\\\"\"; ");
                            _builder.newLine();
                          }
                        }
                      }
                    }
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    CharSequence _decorate = this.decorate(edge);
                    _builder.append(_decorate, "\t\t\t");
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("if (dotrels.containsKey(source + \"->\" + target) == true) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("rels = dotrels.get(source + \"->\" + target);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("else {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("rels = new ArrayList<HashMap<String, String>>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("if (source.length() > 0 && target.length() > 0) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("boolean found = false;");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("for (HashMap<String, String> rel : rels) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("for (String key : rel.keySet()) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("if (key.equals(\"label\")) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t");
                    _builder.append("for (String keyParameters : parameters.keySet()) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t");
                    _builder.append("if (key.equals(keyParameters)) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t");
                    _builder.append("if (parameters.get(keyParameters).length() > 1) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t");
                    _builder.append("String value = rel.get(key);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t");
                    _builder.append("if (value.length() > 0) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t\t");
                    _builder.append("value = value.substring(0, value.length() - 1);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t");
                    _builder.append("value += \"\\n\" + parameters.get(keyParameters).substring(1, parameters.get(keyParameters).length());");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t");
                    _builder.append("rel.put(key, value);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t\t");
                    _builder.append("found = true;");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("if (found == false) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("rels.add(parameters);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("dotrels.put(source + \"->\" + target, rels);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                  }
                }
                {
                  if ((rel instanceof Level)) {
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("//");
                    Level level = ((Level) rel);
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("ArrayList<EObject> llevel_");
                    _builder.append(counter_1, "\t\t");
                    _builder.append(" = ModelManager.getObjectsOfType(\"");
                    String _name_22 = level.getName().getName();
                    _builder.append(_name_22, "\t\t");
                    _builder.append("\", model);");
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("for (EObject level : llevel_");
                    _builder.append(counter_1, "\t\t");
                    _builder.append(") {");
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("LinkedHashMap<String, String> parameters = new LinkedHashMap<String, String>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("ArrayList<HashMap<String, String>> rels = new ArrayList<HashMap<String, String>>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("String source = \"\";");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("ArrayList<String> target = new ArrayList<String>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("for (EAttribute att : level.eClass().getEAllAttributes()) {");
                    _builder.newLine();
                    {
                      EAttribute _attName_3 = level.getAttName();
                      boolean _tripleNotEquals_15 = (_attName_3 != null);
                      if (_tripleNotEquals_15) {
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("if (att.getName().equals(\"");
                        String _name_23 = level.getAttName().getName();
                        _builder.append(_name_23, "\t\t\t\t");
                        _builder.append("\")) {");
                        _builder.newLineIfNotEmpty();
                      } else {
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("if (att.getName().equals(\"name\")) {");
                        _builder.newLine();
                      }
                    }
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("source = (String) level.eGet(att);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("break;");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("for (EReference ref : level.eClass().getEAllReferences()) {");
                    _builder.newLine();
                    {
                      EReference _upper = level.getUpper();
                      boolean _tripleNotEquals_16 = (_upper != null);
                      if (_tripleNotEquals_16) {
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("if (ref.getName().equals(\"");
                        String _name_24 = level.getUpper().getName();
                        _builder.append(_name_24, "\t\t\t\t");
                        _builder.append("\")) {");
                        _builder.newLineIfNotEmpty();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("if (ref.getUpperBound() < 0 || ref.getUpperBound() > 1) {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("List<EObject> ltar = (List<EObject>) level.eGet(ref);");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("if (ltar != null) {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t");
                        _builder.append("for (EObject otar : ltar) {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t");
                        _builder.append("if (otar != null) {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t");
                        _builder.append("for (EAttribute att : otar.eClass().getEAllAttributes()) {");
                        _builder.newLine();
                        {
                          EAttribute _attName_4 = level.getAttName();
                          boolean _tripleNotEquals_17 = (_attName_4 != null);
                          if (_tripleNotEquals_17) {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("\t\t\t\t\t\t");
                            _builder.append("if (att.getName().equals(\"");
                            String _name_25 = level.getAttName().getName();
                            _builder.append(_name_25, "\t\t\t\t\t\t\t\t\t\t");
                            _builder.append("\")) {");
                            _builder.newLineIfNotEmpty();
                          } else {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("\t\t\t\t\t\t");
                            _builder.append("if (att.getName().equals(\"name\")) {");
                            _builder.newLine();
                          }
                        }
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t\t\t");
                        _builder.append("target.add((String) otar.eGet(att));");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t\t\t");
                        _builder.append("break;");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("else {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("EObject tar = (EObject) level.eGet(ref);");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("if (tar != null) {");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t");
                        _builder.append("for (EAttribute att : tar.eClass().getEAllAttributes()) {");
                        _builder.newLine();
                        {
                          EAttribute _attName_5 = level.getAttName();
                          boolean _tripleNotEquals_18 = (_attName_5 != null);
                          if (_tripleNotEquals_18) {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("\t\t\t");
                            _builder.append("if (att.getName().equals(\"");
                            String _name_26 = level.getAttName().getName();
                            _builder.append(_name_26, "\t\t\t\t\t\t\t");
                            _builder.append("\")) {");
                            _builder.newLineIfNotEmpty();
                          } else {
                            _builder.append("\t");
                            _builder.append("\t");
                            _builder.append("\t\t");
                            _builder.append("\t\t\t");
                            _builder.append("if (att.getName().equals(\"name\")) {");
                            _builder.newLine();
                          }
                        }
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t");
                        _builder.append("target.add((String) tar.eGet(att));");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t\t");
                        _builder.append("break;");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("\t");
                        _builder.append("}");
                        _builder.newLine();
                        _builder.append("\t");
                        _builder.append("\t");
                        _builder.append("\t\t");
                        _builder.append("}");
                        _builder.newLine();
                      }
                    }
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    CharSequence _decorate_1 = this.decorate(level);
                    _builder.append(_decorate_1, "\t\t\t");
                    _builder.newLineIfNotEmpty();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("for (String tar : target) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("if ((source != null) && (tar != null)) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("if (source.length() > 0 && tar.length() > 0) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("if (dotrels.containsKey(source + \"->\" + tar) == true) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t");
                    _builder.append("rels = dotrels.get(source + \"->\" + tar);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("else {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t");
                    _builder.append("rels = new ArrayList<HashMap<String, String>>();");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("if (source.length() > 0 && tar.length() > 0) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t");
                    _builder.append("if (rels.contains(parameters) == false) {");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t");
                    _builder.append("rels.add(parameters);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t\t");
                    _builder.append("dotrels.put(source + \"->\" + tar, rels);");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                    _builder.append("\t");
                    _builder.append("\t");
                    _builder.append("}");
                    _builder.newLine();
                  }
                }
                _builder.append("\t");
                _builder.append("\t");
                _builder.append("// COUNTER: ");
                _builder.append(counter_1 = (counter_1 + 1), "\t\t");
                _builder.newLineIfNotEmpty();
              }
            }
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("for (String relname : dotrels.keySet()) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t");
            _builder.append("ArrayList<HashMap<String, String>> rels = dotrels.get(relname);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t");
            _builder.append("for (HashMap<String, String> params : rels) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("int i = 0;");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("String config = \"\";");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("for (String key : params.keySet()) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("if (i == 0) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("if (params.get(key) != null) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("if (params.get(key).length() > 0) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t\t");
            _builder.append("config = key + \"=\" + params.get(key);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t\t");
            _builder.append("i++;");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("else {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("if (params.get(key) != null) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("if (params.get(key).length() > 0) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t\t");
            _builder.append("config = config + \", \" + key + \"=\" + params.get(key);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t\t");
            _builder.append("i++;");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("ArrayList<String> lconf = null;");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("if (dottext.containsKey(relname) == true) {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("lconf = dottext.get(relname);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("else {");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t\t");
            _builder.append("lconf = new ArrayList<String>();");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("lconf.add(config);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t\t");
            _builder.append("dottext.put(relname, lconf);");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t");
            _builder.append("}");
            _builder.newLine();
          }
        }
      }
    }
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public static void generateGraphs(File file, String folder, List<EPackage> packages, File exercise) throws ModelNotFoundException, FileNotFoundException, UnsupportedEncodingException {");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if (file.isFile()) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("String pathfile = file.getPath();");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if (pathfile.endsWith(\".model\") == true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("Resource model = ModelManager.loadModel(packages, pathfile);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String path = exercise.getName() + \"/\";");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("List<String> folders = Arrays.asList(folder.split(\"/\"));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("if (folders.size() > 0) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("for (String folderName : folders) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("path += folderName + \"/\";");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String dotfile = \"");
    _builder.append(folder, "\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + \"/\" +");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t");
    _builder.append("path + file.getName().replace(\".model\", \".dot\");");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String pngfile = \"");
    _builder.append(folder, "\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + \"/\" +");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t");
    _builder.append("path + file.getName().replace(\".model\", \".png\");");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    CharSequence _generate = this.generate(draw, folder);
    _builder.append(_generate, "\t\t\t\t");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t");
    _builder.append("File diagramsfolder = new File(\"");
    _builder.append(folder, "\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t");
    _builder.append("if (diagramsfolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("diagramsfolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("File exercisefolder = new File(\"");
    _builder.append(folder, "\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + exercise.getName() + \"/\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t");
    _builder.append("if (exercisefolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("exercisefolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("path = exercise.getName() + \"/\";");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("folders = Arrays.asList(folder.split(\"/\"));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("if (folders.size() > 0) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("for (String folderName : folders) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("path += folderName + \"/\";");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("exercisefolder = new File(\"");
    _builder.append(folder, "\t\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + path);");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("if (exercisefolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("exercisefolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("PrintWriter dotwriter = new PrintWriter(dotfile, \"UTF-8\");");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("for (String dotline : dotcode) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("dotwriter.println(dotline);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("dotwriter.close();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String[] command = {\"dot\", \"-Tpng\", dotfile, \"-o\", pngfile};");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("Process proc = Runtime.getRuntime().exec(command);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("proc.waitFor(); ");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("} catch (IOException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("// TODO Auto-generated catch block");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("e.printStackTrace();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("} catch (InterruptedException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("// TODO Auto-generated catch block");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("e.printStackTrace();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("//Reload input");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("model.unload();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("model.load(null);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("} catch (Exception e) {}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("else {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if (file.getName().equals(\"registry\") != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("File[] filesBlock = file.listFiles();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("for (File fileBlock : filesBlock) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("generateGraphs(fileBlock, folder + \"/\" + file.getName(), packages, exercise);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void generate() throws MetaModelNotFoundException, ModelNotFoundException, FileNotFoundException {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("String metamodel = \"");
    String _replace = ModelManager.getMetaModel().replace("\\", "/");
    _builder.append(_replace, "\t\t");
    _builder.append("\";");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t");
    _builder.append("List<EPackage> packages = ModelManager.loadMetaModel(metamodel);");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("// GENERATES PNG FILES FROM SOURCE MODELS");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("File folder = new File(\"");
    _builder.append(folder, "\t\t");
    _builder.append("/data/model\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t");
    _builder.append("for (File file : folder.listFiles()) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if (file.isFile()) {");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String pathfile = file.getPath();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("if (pathfile.endsWith(\".model\") == true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("Resource model = ModelManager.loadModel(packages, pathfile);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String dotfile = \"");
    _builder.append(folder, "\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + ");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \"\") + \"/\" +");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \".dot\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String pngfile = \"");
    _builder.append(folder, "\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + ");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \"\") + \"/\" +");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \".png\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    CharSequence _generate_1 = this.generate(draw, folder);
    _builder.append(_generate_1, "\t\t\t\t\t");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t");
    _builder.append("File diagramsfolder = new File(\"");
    _builder.append(folder, "\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t");
    _builder.append("if (diagramsfolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("diagramsfolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("File dotfolder = new File(\"");
    _builder.append(folder, "\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + ");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \"\") + \"/\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if (dotfolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("dotfolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("PrintWriter dotwriter = null;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("dotwriter = new PrintWriter(dotfile, \"UTF-8\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("for (String dotline : dotcode) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("dotwriter.println(dotline);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("dotwriter.close();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("} catch (UnsupportedEncodingException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("//Reload input");
    _builder.newLine();
    _builder.append("\t    \t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("model.unload();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("model.load(null);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("} catch (Exception ex) {}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("continue;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String[] command = {\"dot\", \"-Tpng\", dotfile, \"-o\", pngfile};");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("Process proc = Runtime.getRuntime().exec(command);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("proc.waitFor(); ");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("} catch (IOException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("// TODO Auto-generated catch block");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("e.printStackTrace();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("} catch (InterruptedException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("// TODO Auto-generated catch block");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("e.printStackTrace();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("//Reload input");
    _builder.newLine();
    _builder.append("    \t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("model.unload();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("model.load(null);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("} catch (Exception e) {}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("// GENERATES PNG FILES FROM MUTANTS");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("folder = new File(\"");
    _builder.append(folder, "\t\t");
    _builder.append("/data/out\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t");
    _builder.append("for (File exercise : folder.listFiles()) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if (exercise.isDirectory()) {");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("for (File file : exercise.listFiles()) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if (file.isFile()) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("String pathfile = file.getPath();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("if (pathfile.endsWith(\".model\") == true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("Resource model = ModelManager.loadModel(packages, pathfile);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("String dotfile = \"");
    _builder.append(folder, "\t\t\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + exercise.getName() + \"/\" +");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \".dot\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("String pngfile = \"");
    _builder.append(folder, "\t\t\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + exercise.getName() + \"/\" +");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("file.getName().replace(\".model\", \".png\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    CharSequence _generate_2 = this.generate(draw, folder);
    _builder.append(_generate_2, "\t\t\t\t\t\t\t");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("File diagramsfolder = new File(\"");
    _builder.append(folder, "\t\t\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("if (diagramsfolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("diagramsfolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("File dotfolder = new File(\"");
    _builder.append(folder, "\t\t\t\t\t\t\t");
    _builder.append("/src-gen/html/diagrams/\" + exercise.getName() + \"/\");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("if (dotfolder.exists() != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("dotfolder.mkdir();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("PrintWriter dotwriter = null;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("dotwriter = new PrintWriter(dotfile, \"UTF-8\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("for (String dotline : dotcode) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("dotwriter.println(dotline);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("dotwriter.close();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("} catch (UnsupportedEncodingException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("//Reload input");
    _builder.newLine();
    _builder.append("\t    \t\t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("model.unload();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("model.load(null);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("} catch (Exception ex) {}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("continue;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("String[] command = {\"dot\", \"-Tpng\", dotfile, \"-o\", pngfile};");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("Process proc = Runtime.getRuntime().exec(command);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("proc.waitFor(); ");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("} catch (IOException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("// TODO Auto-generated catch block");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("e.printStackTrace();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("} catch (InterruptedException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("// TODO Auto-generated catch block");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("e.printStackTrace();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("//Reload input");
    _builder.newLine();
    _builder.append("\t    \t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("model.unload();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("model.load(null);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("} catch (Exception e) {}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("else {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("if (file.getName().equals(\"registry\") != true) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("File[] filesBlock = file.listFiles();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("for (File fileBlock : filesBlock) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("try {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("generateGraphs(fileBlock, file.getName(), packages, exercise);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("} catch (UnsupportedEncodingException e) {");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("continue;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    return _builder;
  }
}
